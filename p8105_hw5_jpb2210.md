Data Science - Homework \#5
================
Jon Brock - JPB2210

  - [Problem \#1](#problem-1)
  - [Problem \#2](#problem-2)
  - [Problem \#3](#problem-3)
  - [Homework Resources](#homework-resources)

``` r
library(tidyverse)
```

-----

## Problem \#1

###### (*20 points*)

##### *Writing a function*

``` r
set.seed(10)

iris_with_missing = iris %>% 
  map_df(~replace(.x, sample(1:150, 20), NA)) %>%
  mutate(Species = as.character(Species))
```

``` r
species_replace <- function(x, y) {
    
    pull(x, y) %>% replace_na("virginica")
    
}

species_replace(iris_with_missing, "Species")
```

    ##   [1] "setosa"     "setosa"     "setosa"     "setosa"     "setosa"    
    ##   [6] "setosa"     "setosa"     "setosa"     "setosa"     "setosa"    
    ##  [11] "setosa"     "setosa"     "setosa"     "setosa"     "setosa"    
    ##  [16] "setosa"     "setosa"     "setosa"     "setosa"     "setosa"    
    ##  [21] "setosa"     "virginica"  "setosa"     "setosa"     "virginica" 
    ##  [26] "setosa"     "virginica"  "setosa"     "setosa"     "setosa"    
    ##  [31] "setosa"     "setosa"     "setosa"     "setosa"     "setosa"    
    ##  [36] "setosa"     "setosa"     "setosa"     "setosa"     "setosa"    
    ##  [41] "setosa"     "virginica"  "setosa"     "setosa"     "setosa"    
    ##  [46] "virginica"  "setosa"     "setosa"     "setosa"     "setosa"    
    ##  [51] "virginica"  "versicolor" "versicolor" "versicolor" "versicolor"
    ##  [56] "versicolor" "virginica"  "versicolor" "virginica"  "versicolor"
    ##  [61] "versicolor" "versicolor" "versicolor" "versicolor" "versicolor"
    ##  [66] "versicolor" "versicolor" "versicolor" "versicolor" "versicolor"
    ##  [71] "versicolor" "virginica"  "versicolor" "versicolor" "versicolor"
    ##  [76] "versicolor" "versicolor" "versicolor" "versicolor" "virginica" 
    ##  [81] "versicolor" "versicolor" "versicolor" "versicolor" "versicolor"
    ##  [86] "versicolor" "versicolor" "versicolor" "versicolor" "versicolor"
    ##  [91] "versicolor" "versicolor" "versicolor" "virginica"  "versicolor"
    ##  [96] "versicolor" "versicolor" "versicolor" "versicolor" "virginica" 
    ## [101] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [106] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [111] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [116] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [121] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [126] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [131] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [136] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [141] "virginica"  "virginica"  "virginica"  "virginica"  "virginica" 
    ## [146] "virginica"  "virginica"  "virginica"  "virginica"  "virginica"

``` r
# TEST CODE BELOW


#code_test <- function(x) {
    
#    modify_at(.x, .Species, replace_na("virginica"))
    
#}

#code_test(iris_with_missing)
```

-----

## Problem \#2

###### (*25 points*)

##### *Tidy and plot longitudinal data*

``` r
csv_files <- list.files("./data", pattern = "*.csv", full.names = TRUE) %>%  
    set_names(nm = basename(.)) %>% 
    map_df(read_csv, col_names = TRUE, col_types = cols(), .id = "filename") %>% 
    mutate(
        arm = str_sub(filename, 1,3),
        id = str_sub(filename, 5,6)) %>% 
    select(arm, id, week_1:week_8) %>% 
    mutate(arm = case_when(
        arm == "con" ~ "control_participant",
        arm == "exp" ~ "experimental_participant")) %>% 
    unite(participant, c(arm, id), remove = TRUE) %>% 
    pivot_longer(-participant, names_to = "week_no", values_to = "count") %>% 
    
    ggplot(aes(x = week_no, y = count, group = participant, color = participant)) +
    geom_line() +
    labs(
        title = "Count metrics for control and experimental arms",
        subtitle = "[over the course of an eight week observation period]",
        x = "Week No.",
        y = "Count")

csv_files
```

<img src="p8105_hw5_jpb2210_files/figure-gfm/iteration of reading csv files-1.png" style="display: block; margin: auto;" />

-----

## Problem \#3

###### (*35 points*)

##### *Create and plot simulations*

-----

## Homework Resources

*Given the enormous headache of trying to figure out this homework, I
relied much more heavily on online resources than previous homeworks. I
felt it necessary to cite all of my resources. They are listed below.*

[https://www.gerkelab.com/blog/2018/09/import-directory-csv-purrr-readr/]()  
[https://serialmentor.com/blog/2016/6/13/reading-and-combining-many-tidy-data-files-in-R]()  
[https://www.hvitfeldt.me/blog/purrr-tips-and-tricks/\#sources]()  
[https://github.com/STAT545-UBC/Discussion/issues/398]()  
[https://gist.github.com/ColinFay/d74d331825868b181860212cd1577b69]()  
[https://gist.github.com/ColinFay/d74d331825868b181860212cd1577b69]()  
[https://lsru.github.io/tv\_course/TD\_purrr\_solution.html]()  
[https://github.com/DanOvando/learn-purrr]()  
[https://stats.idre.ucla.edu/r/faq/how-can-i-visualize-longitudinal-data-in-ggplot2/]()  
[https://community.rstudio.com/t/using-case-when-over-multiple-columns/17206]()
